# 目标是最终解析这个文件

思路: 从上往下匹配

依次是空白元素, 块元素(内部匹配行元素, 某些块可以继续匹配块元素), 行元素(内部只匹配行元素), 新开块标志

## 块元素

- 标题: 标题里可以包含任何行内元素
    - #### 例如 **粗体**, *斜体*, ***粗斜体***, [链接](https://fontlos.com), ~~删除文字~~, `行内代码`, $行内数学表达式$
    特殊一级标题
    =
    特殊二级标题
    -
- 列表
    - 可以匹配任何元素, 但是每个列表结尾就是块结尾
    - 同级列表各自为块
    - #### 可以放标题
    - > 可以放引用
    - > 但是引用会被截断成单独的块
    - $$ math \space display \space has \space bug $$
    - 多行数学块必须作为单独的块, 不然有 bug
- 代码块: 内部只匹配字符串
    ```js
    // code
    ```
- 数学块: 内部只匹配字符串
    $$
    math \frac{1}{2}
    $$
- 表格
|VSCode 表格必须为单独块|上面至少空一行|
|---|---|
|例如这个表格无法渲染|但应该尝试解决这个问题|

|可以内嵌任何行内元素|**粗体**|
|:-:|-:|
|[链接](http)|`code`|
|用冒号实现|对齐方案|
- 引用: 感觉是最复杂的结构
    >> 可以分层
    > 不空一行的话即使换行也会和上面的层级连在一起, 比如这一行也是二级缩进
    >
    > 几乎可以放任何元素
    > #### 可以有标题
    > ```js
    > // 可以内嵌代码块
    > ```
    > $$
    >   math\
    >   block\
    > $$
    > - 可以放列表
    >
    > |表格也可以|但需要在上面至少空一行|
    > |---|---|
    > |形成一个单独的块|不然无法渲染|
- 命令块
- 分割线
----

## 行内元素和换行

- 文字变体: 对于文字变体可以通过空格破坏语法, 比如 * 这不是斜体, **但内嵌粗体** *, 可以内嵌所有行内元素
    - ***粗斜体*** ___另一种粗斜体___
    - **粗体** __另一种粗体__
    - *斜体* _另一种斜体_
    - ~~删除线~~
    - ==高亮== ^^另一种高亮^^
    - **文字变体可以嵌套, 例如这是粗体中的 *斜体*,~~删除线~~**
- ` code, 无法通过空格破坏语法结构, 内部只能是字符, 但可以被嵌入到文字变体中 `
- $math\displaystyle\frac{1}{2}$
- 链接
    - https://www.原始链接.com
    - ![图片](http)
    - [链接](http)
    - [![链接可以内嵌图片]()]()
    - [[但图片](不可以内嵌链接)]()
    - [**可以内嵌文字变体**, `code`, $math$]()
    - [但理论上原始链接的优先级应该高于文字变体, 比如 VSCode无法正确解析这个 http://hello.com/__123__](http://hello.com/__123__)
    - **[可以被嵌入到文字变体中]()**
    - [链接文字
可以多行
只要不空行]()
- 换行
单个斜杠换行\
后面加两个空格换行, 但这种语法太丑了我们不支持它  
至于加<br>标签当成普通文字不去处理就好
换行后仍属于上面的列表, 也就是说列表的结束不会结束块, 但列表的开始一定会新开块
- 结束块
空余多于一行

或者任何新开块的操作, 如列表开始, 标题自成一块, 引用开始, 代码块自成一块, 数学块自成一块
